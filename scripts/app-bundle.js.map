{"version":3,"sources":["app.js","environment.js","main.js","api/api.js","api/leaderboard.js","api/quizz.js","home/home.js","resources/index.js","/Users/hadrien/Documents/dev/monkey/src/app.html","/Users/hadrien/Documents/dev/monkey/src/home/home.html","app.scss","home/home.scss"],"names":["App","configureRouter","config","router","title","options","pushState","map","route","name","moduleId","handleUnknownRoutes","redirect","debug","testing","apiHost","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Api","httpClient","host","request","method","path","body","fetch","headers","JSON","stringify","response","json","Leaderboard","api","get","Quizz","window","localStorage","parse","storage","_currentQuizz","e","quizz","removeItem","responses","clear","_currentResults","results","bindingEngine","Map","collectionObserver","subscribe","saveResponses","splices","retreiveResponse","Object","keys","key","set","_currentResponses","splice","object","init","userName","getQuestion","quizzId","index","postAnswers","current","id","Array","from","values","Home","error","quizzService","submit","console","log","cancel"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  configureRouter(config, router) {\n    config.title = 'Quizz Monkey!';\n    config.options.pushState = true;\n    config.map([{\n      route: '/',\n      name: 'home',\n      moduleId: 'home/home'\n    }]);\n    router.handleUnknownRoutes({\n      redirect: '/'\n    });\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true,\n  apiHost: '/api/'\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import runtime from 'regenerator-runtime';\nimport {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\nimport environment from '../environment';\n\n@inject(HttpClient)\nexport class Api {\n  host = environment.apiHost;\n\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n  }\n\n  async request({ method, path, body }) {\n    const response = await this.httpClient.fetch(`${this.host}${path}`, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      method,\n      body: JSON.stringify(body)\n    });\n    const json = await response.json();\n    return json;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {Api} from './api';\n\n@inject(Api)\nexport class Leaderboard {\n  constructor(api) {\n    this.api = api;\n  }\n\n  async get() {\n    return this.api.request({\n      method: 'get',\n      path: 'leaderboard'\n    });\n  }\n}\n","import {inject, BindingEngine} from 'aurelia-framework';\nimport {Api} from './api';\n\n@inject(Api, BindingEngine, window.localStorage)\nexport class Quizz {\n\n  responses = new Map();\n\n  get current() {\n    try {\n      return JSON.parse(this.storage._currentQuizz);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  set current(quizz) {\n    if (quizz) {\n      this.storage._currentQuizz = JSON.stringify(quizz);\n    } else {\n      this.storage.removeItem('_currentQuizz');\n      this.responses.clear();\n    }\n  }\n\n  get results() {\n    try {\n      return JSON.parse(this.storage._currentResults);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  set results(results) {\n    if (results) {\n      this.storage._currentResults = JSON.stringify(results);\n    } else {\n      this.storage.removeItem('_currentResults');\n      this.responses.clear();\n    }\n  }\n\n  constructor(api, bindingEngine, storage) {\n    this.api = api;\n    this.storage = storage;\n\n    bindingEngine.collectionObserver(this.responses).subscribe(splices => this.saveResponses(splices));\n\n    const responses = this.retreiveResponse();\n    for (let key of Object.keys(responses)) {\n      this.responses.set(key, responses[key]);\n    }\n  }\n\n  retreiveResponse() {\n    try {\n      return JSON.parse(this.storage._currentResponses);\n    } catch (e) {\n      return {};\n    }\n  }\n  saveResponses(splices) {\n    const responses = this.retreiveResponse();\n\n    for (let splice of splices) {\n      responses[splice.key] = splice.object.get(splice.key);\n    }\n    this.storage._currentResponses = JSON.stringify(responses);\n  }\n\n  async init({ userName }) {\n    return this.api.request({\n      method: 'get',\n      path: `quizz?userName=${userName}`\n    });\n  }\n\n  async getQuestion({ quizzId, index }) {\n    return this.api.request({\n      method: 'get',\n      path: `quizz/${quizzId}/${index}`\n    });\n  }\n\n\n  async postAnswers() {\n    return this.api.request({\n      method: 'post',\n      path: `quizz/${this.current.id}`,\n      body: {\n        responses: Array.from(this.responses.values())\n      }\n    });\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {Quizz} from '../api/quizz';\nimport {Router} from 'aurelia-router';\n\n@inject(Quizz, Router)\nexport class Home {\n  error = false;\n\n  constructor(quizz, router) {\n    this.quizzService = quizz;\n    this.router = router;\n  }\n\n  async submit() {\n    if (!this.userName) {\n      this.error = true;\n      return;\n    }\n\n    this.error = false;\n\n    const quizz = await this.quizzService.init({\n      userName: this.userName\n    });\n    this.quizzService.current = quizz;\n    console.log(quizz);\n  }\n\n  cancel() {\n    this.quizzService.current = null;\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n",null,null,"html,\nbody {\n  font-size: 10px;\n  margin: 0;\n  padding: 0;\n  font-family: 'Happy Monkey', sans-serif;\n  height: 100%\n}\n.main-header {\n  height: 6rem;\n  line-height: 6rem;\n  background-color: #f4e6bd;\n  background-image: -webkit-gradient(linear, left top, left bottom, from(rgb(244, 230, 189)), to(rgb(135, 167, 117)));\n  background-image: -webkit-linear-gradient(top, rgb(244, 230, 189), rgb(135, 167, 117));\n  background-image: -moz-linear-gradient(top, rgb(244, 230, 189), rgb(135, 167, 117));\n  background-image: -o-linear-gradient(top, rgb(244, 230, 189), rgb(135, 167, 117));\n  background-image: -ms-linear-gradient(top, rgb(244, 230, 189), rgb(135, 167, 117));\n  background-image: linear-gradient(top, rgb(244, 230, 189), rgb(135, 167, 117));\n\n  h1 {\n    margin: 0;\n    padding-left: 2rem;\n  }\n  nav {\n    position: absolute;\n    top: 0;\n    right: 1rem;\n    a {\n      font-size: 2rem;\n      color: white;\n      text-decoration: none;\n    }\n  }\n}\n\n.main-view-ctn {\n  display: table;\n  width: 100%;\n  height: 100%;\n}\n\nrouter-view {\n  display: table-cell;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  vertical-align: middle;\n}\n\nbutton {\n  background-color: rgb(136, 171, 122);\n  border: none;\n  border-radius: 1rem;\n  padding: 1rem;\n  box-shadow: 0 1rem 0 rgb(79, 100, 71);\n  transition: transform .1s ease-in, box-shadow .1s ease-in;\n  outline: none;\n  cursor: pointer;\n  &:active {\n    box-shadow: 0 2px 0 rgb(79, 100, 71);\n    transform: translate3d(0, 1rem, 0);\n  }\n  &.has-error {\n    box-shadow: 0 1rem 0 rgb(113, 79, 51);\n    &:active {\n    box-shadow: 0 2px 0 rgb(113, 79, 51);\n    }\n  }\n}\n",".home-view {\n  $fontSize: 4rem;\n  font-size: $fontSize;\n  input,\n  button {\n    font-size: $fontSize;\n  }\n}\n"],"sourceRoot":"../src"}